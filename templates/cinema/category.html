{% extends 'cinema/base.html' %}

{% block title %}{{ genre_name }} - WESTLINE{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-3 sm:px-4 py-8">
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8">
        <div>
            <h1 class="text-4xl font-black section-title mb-2">{{ genre_name }}</h1>
            <p class="text-gray-400">–ù–∞–π–¥–µ–Ω–æ —Ñ–∏–ª—å–º–æ–≤: <span class="text-cyan-400 font-bold">{{ films|length }}</span></p>
        </div>
        <div class="flex gap-2">
            <a href="?sort=rating" class="{% if sort == 'rating' %}btn-gradient{% else %}border-2 border-purple-500/30 hover:border-purple-500{% endif %} text-white px-4 py-2 rounded-lg font-bold text-sm">
                ‚≠ê –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É
            </a>
            <a href="?sort=popular" class="{% if sort == 'popular' %}btn-gradient{% else %}border-2 border-purple-500/30 hover:border-purple-500{% endif %} text-white px-4 py-2 rounded-lg font-bold text-sm">
                üî• –ü–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏
            </a>
        </div>
    </div>

    {% if films %}
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2 sm:gap-4 mb-12">
        {% for film in films %}
            {% if film.poster_path %}
            <a href="{% url 'film_detail' film.id %}" class="group">
                <div class="film-card relative">
                    <img src="https://image.tmdb.org/t/p/w300{{ film.poster_path }}" 
                         alt="{{ film.title }}" class="w-full h-48 sm:h-64 lg:h-80 object-cover">
                    <div class="absolute bottom-0 w-full bg-gradient-to-t from-black p-2 sm:p-4">
                        <h3 class="font-bold text-xs sm:text-sm line-clamp-1">{{ film.title }}</h3>
                        <div class="flex justify-between text-xs">
                            <p class="text-yellow-400 font-bold">‚≠ê {{ film.vote_average|floatformat:1 }}</p>
                            <p class="text-gray-300">{{ film.release_date|date:'Y'|default:'N/A' }}</p>
                        </div>
                    </div>
                </div>
            </a>
            {% endif %}
        {% endfor %}
    </div>
    {% else %}
    <div class="text-center py-16">
        <i class="fas fa-film text-6xl text-gray-600 mb-4"></i>
        <p class="text-2xl text-gray-400">–§–∏–ª—å–º—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
        <p class="text-gray-500 mt-2">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</p>
    </div>
    {% endif %}
</div>
{% endblock %}
